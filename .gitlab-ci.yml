image: elixir:alpine

services:
  - postgres:alpine
variables:
  POSTGRES_DB: postgres
  POSTGRES_USER: postgres
  POSTGRES_PASSWORD: postgres

cache:
  paths:
    - blog/deps
    - blog/_build

before_script:
  - mix local.hex --force
  - mix local.rebar --force
  - cd blog
  - mix deps.get
  - mix compile
  - mix ecto.setup

test1:
  stage: test
  script:
    - mix test
